# lq-dc-js 库测试指南

## 测试方法概述

测试 lq-dc-js 库有多种方法，以下是几种常用的测试方式：

### 1. 使用浏览器直接打开测试页面

最简单的方法是直接在浏览器中打开 `__tests__/demo.html` 文件：

```
双击 __tests__/demo.html 文件
```

> **注意**：直接打开文件可能会因为浏览器的安全限制导致某些功能无法正常工作，特别是涉及到网络请求的功能。

### 2. 使用本地HTTP服务器（推荐）

为了避免浏览器安全限制，建议使用本地HTTP服务器：

```bash
# 使用 http-server（需要先安装）
npm install -g http-server
http-server -o /__tests__/demo.html

# 或使用 npx 不需要全局安装
npx http-server -o /__tests__/demo.html
```

### 3. 使用Node.js测试CommonJS版本

如果要测试CommonJS版本，可以创建一个Node.js脚本：

```javascript
// test.js
const lqDcJs = require('../dist/index.cjs.js');

console.log('库导出对象:', Object.keys(lqDcJs));

// 测试数组工具
const testArray = [1, 2, 2, 3, 4, 5, 5];
console.log('数组去重:', lqDcJs.arrayUtils.unique(testArray));
```

然后运行：

```bash
node test.js
```

### 4. 使用现代打包工具测试ESM版本

在支持ESM的项目中：

```javascript
import lqDcJs from 'lq-dc-js';
// 或者导入特定模块
import { arrayUtils, string } from 'lq-dc-js';

console.log(arrayUtils.unique([1, 2, 2, 3]));
```

## 测试页面说明

`demo.html` 测试页面包含以下测试内容：

1. **库导出检查** - 验证库是否正确加载并显示所有导出的模块
2. **数组工具测试** - 测试数组相关功能（safeGet, unique, ensureArray）
3. **字符串工具测试** - 测试字符串相关功能（ensureString, safeSubstring, isEmpty, format）
4. **日期工具测试** - 测试日期相关功能（format, daysBetween, isInRange）
5. **平台检测测试** - 测试环境检测功能（getEnvType, isBrowser, isNode, isMiniProgram）

## 常见问题解决

### 问题：控制台报错 "lqDcJs is not defined"

**解决方案**：
- 确保使用的是UMD版本（index.umd.js）而不是ESM版本
- 检查文件路径是否正确
- 使用HTTP服务器而不是直接打开文件

### 问题：某些功能在浏览器中不工作

**解决方案**：
- 某些功能可能仅在特定环境（如Node.js）中可用
- 检查浏览器控制台是否有错误信息
- 确认是否使用了最新版本的库

## 自定义测试

您可以根据需要修改 `demo.html` 文件，添加更多测试用例或测试其他模块功能。